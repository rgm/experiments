{
"version":3,
"file":"goog.async.freelist.js",
"lineCount":34,
"mappings":"AAsBAA,IAAA,CAAKC,OAAL,CAAa,qBAAb,CAAA;AAMAD,IAAA,CAAKE,KAAL,CAAWC,QAAX,GAAsB,KAAA;AAMpBC,aAAW,CAACC,MAAD,EAASC,KAAT,EAAgBC,KAAhB,CAAuB;AAEhC,QAAA,CAAKC,MAAL,GAAcD,KAAd;AAEA,QAAA,CAAKE,OAAL,GAAeJ,MAAf;AAEA,QAAA,CAAKK,MAAL,GAAcJ,KAAd;AAGA,QAAA,CAAKK,UAAL,GAAkB,CAAlB;AAEA,QAAA,CAAKC,KAAL,GAAa,IAAb;AAXgC;AAiBlCC,KAAG,EAAG;AACJ,QAAIC,IAAJ;AACA,QAAI,IAAJ,CAASH,UAAT,GAAsB,CAAtB,CAAyB;AACvB,UAAA,CAAKA,UAAL,EAAA;AACAG,UAAA,GAAO,IAAP,CAAYF,KAAZ;AACA,UAAA,CAAKA,KAAL,GAAaE,IAAb,CAAkBC,IAAlB;AACAD,UAAA,CAAKC,IAAL,GAAY,IAAZ;AAJuB,KAAzB;AAMED,UAAA,GAAO,IAAA,CAAKL,OAAL,EAAP;AANF;AAQA,WAAOK,IAAP;AAVI;AAgBNE,KAAG,CAACF,IAAD,CAAO;AACR,QAAA,CAAKJ,MAAL,CAAYI,IAAZ,CAAA;AACA,QAAI,IAAJ,CAASH,UAAT,GAAsB,IAAtB,CAA2BH,MAA3B,CAAmC;AACjC,UAAA,CAAKG,UAAL,EAAA;AACAG,UAAA,CAAKC,IAAL,GAAY,IAAZ,CAAiBH,KAAjB;AACA,UAAA,CAAKA,KAAL,GAAaE,IAAb;AAHiC;AAF3B;AAcVG,WAAS,EAAG;AACV,WAAO,IAAP,CAAYN,UAAZ;AADU;AArDQ,CAAtB;;",
"sources":["goog/async/freelist.js"],
"sourcesContent":["// Copyright 2015 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Simple freelist.\n *\n * An anterative to goog.structs.SimplePool, it imposes the requirement that the\n * objects in the list contain a \"next\" property that can be used to maintain\n * the pool.\n */\n\ngoog.provide('goog.async.FreeList');\n\n\n/**\n * @template ITEM\n */\ngoog.async.FreeList = class {\n  /**\n   * @param {function():ITEM} create\n   * @param {function(ITEM):void} reset\n   * @param {number} limit\n   */\n  constructor(create, reset, limit) {\n    /** @private @const {number} */\n    this.limit_ = limit;\n    /** @private @const {function()} */\n    this.create_ = create;\n    /** @private @const {function(ITEM):void} */\n    this.reset_ = reset;\n\n    /** @private {number} */\n    this.occupants_ = 0;\n    /** @private {ITEM} */\n    this.head_ = null;\n  }\n\n  /**\n   * @return {ITEM}\n   */\n  get() {\n    let item;\n    if (this.occupants_ > 0) {\n      this.occupants_--;\n      item = this.head_;\n      this.head_ = item.next;\n      item.next = null;\n    } else {\n      item = this.create_();\n    }\n    return item;\n  }\n\n  /**\n   * @param {ITEM} item An item available for possible future reuse.\n   */\n  put(item) {\n    this.reset_(item);\n    if (this.occupants_ < this.limit_) {\n      this.occupants_++;\n      item.next = this.head_;\n      this.head_ = item;\n    }\n  }\n\n  /**\n   * Visible for testing.\n   * @package\n   * @return {number}\n   */\n  occupants() {\n    return this.occupants_;\n  }\n};\n"],
"names":["goog","provide","async","FreeList","constructor","create","reset","limit","limit_","create_","reset_","occupants_","head_","get","item","next","put","occupants"]
}
